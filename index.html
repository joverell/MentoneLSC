<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentone LSC Hub</title>
    <style>
        body { font-family: sans-serif; margin: 0; }
        header { background-color: #f8f8f8; padding: 20px; text-align: center; }
        header img { max-width: 100px; }
        h1, h2 { text-align: center; }
        .container { padding: 20px; }
        .section { margin-bottom: 30px; }
        .section h2 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
        #events-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .event { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .links a { display: block; padding: 15px; background-color: #007bff; color: white; text-decoration: none; margin-bottom: 10px; border-radius: 5px; text-align: center; }
    </style>
</head>
<body>

    <header>
        <img src="https://mentonelsc.com/wp-content/uploads/2021/03/cropped-C100-MLSC-logo-2-e1723032334453-80x81.jpg" alt="Mentone LSC Logo">
        <h1>Mentone LSC Hub</h1>
    </header>

    <div class="container">
        <div id="events" class="section">
            <h2>Bar and Kitchen Events</h2>
            <div id="events-container"></div>
        </div>

        <div id="membership" class="section">
            <h2>Membership</h2>
            <div class="links">
                <a href="https://mentonelsc.com/new-member/" target="_blank">New Member</a>
                <a href="https://mentonelsc.com/renewing-member/" target="_blank">Renewing Member</a>
            </div>
        </div>

        <div id="teamapp" class="section">
            <h2>TeamApp</h2>
            <div class="links">
                <a href="https://www.teamapp.com/v2/clubs/163380?_detail=v1" target="_blank">Visit TeamApp</a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const eventsContainer = document.getElementById('events-container');

            fetch('https://mentonelsc.com/wp-json/tribe/events/v1/events')
                .then(response => response.json())
                .then(data => {
                    if (data.events && data.events.length > 0) {
                        data.events.forEach(event => {
                            const eventElement = document.createElement('div');
                            eventElement.classList.add('event');

                            const title = document.createElement('h3');
                            title.innerHTML = event.title;
                            eventElement.appendChild(title);

                            const date = new Date(event.start_date);
                            const dateString = date.toLocaleDateString('en-AU', {
                                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                            });
                            const timeString = date.toLocaleTimeString('en-AU', {
                                hour: '2-digit', minute: '2-digit'
                            });

                            const dateElement = document.createElement('p');
                            dateElement.innerHTML = `<strong>Date:</strong> ${dateString} at ${timeString}`;
                            eventElement.appendChild(dateElement);

                            const description = document.createElement('div');
                            description.innerHTML = event.description;
                            eventElement.appendChild(description);

                            if (event.url) {
                                const link = document.createElement('a');
                                link.href = event.url;
                                link.textContent = 'Find out more';
                                link.target = '_blank';
                                eventElement.appendChild(link);
                            }

                            eventsContainer.appendChild(eventElement);
                        });
                    } else {
                        eventsContainer.innerHTML = '<p>No upcoming events found.</p>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching events:', error);
                    eventsContainer.innerHTML = '<p>Could not load events. Please try again later.</p>';
                });
        });
    </script>

</body>
</html>
